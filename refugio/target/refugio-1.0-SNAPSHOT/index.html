<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Rescate de mascotas</title>
    </head>
    <body>
        <h1>Rescate de mascotas</h1>

        <form action="ControladorMascotas" method="POST">
            <label>Tipo:</label>
            <select name="tipo">
                <option value="canino">Canino</option>
                <option value="felino">Felino</option>
            </select>
            <br><br>

            <label>Nombre:</label>
            <input type="text" name="nombre">
            <br><br>

            <label>Raza:</label>
            <input type="text" name="raza">
            <br><br>

            <label>Color:</label>
            <input type="text" name="color">
            <br><br>

            <label>Edad:</label>
            <input type="number" name="edad">
            <br><br>

            <div id="nivel-entrenamiento" style="display:none;">
                <label>Nivel de entrenamiento:</label>
                <input type="number" name="nivel-entrenamiento" min="0" max="10">
                <br><br>
            </div>

            <div id="libre-toxoplasmosis" style="display:none;">
                <label>Libre de toxoplasmosis:</label>
                <input type="checkbox" name="libre-toxoplasmosis" value="true">
                <br><br>
            </div>

            <button type="submit">Agregar</button>
        </form>

        <hr>

        <h2>Mascotas disponibles</h2>
        <table>
            <thead>
                <tr>
                    <th>Tipo</th>
                    <th>Nombre</th>
                    <th>Raza</th>
                    <th>Color</th>
                    <th>Edad</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
            <c:forEach var="mascota" items="${mascotas}">
                <tr>
                    <td>${mascota.tipo}</td>
                    <td>${mascota.nombre}</td>
                    <td>${mascota.raza}</td>
                    <td>${mascota.color}</td>
                    <td>${mascota.edad}</td>
                    <td>
                        <form action="ControladorMascotas" method="POST">
                            <input type="hidden" name="indice" value="${mascota.indice}">
                            <button type="submit" name="accion" value="eliminar">Eliminar</button>
                        </form>
                    </td>
                </tr>
            </c:forEach>
        </tbody>
    </table>

    <hr>

    <p>Promedio de edad: ${promedioEdad}</p>
    <p>Cantidad de caninos: ${cantidadCaninos}</p>
    <p>Cantidad de felinos: ${cantidadFelinos}</p>

    <script type="text/javascript">
        // Mostrar o ocultar campos dependiendo del tipo de mascota seleccionado
        const selectTipo = document.querySelector('select[name="tipo"]');
        selectTipo.addEventListener('change', () => {
            const divNivelEntrenamiento = document.querySelector('#nivel-entrenamiento');
            const divLibreToxoplasmosis = document.querySelector('#libre-toxoplasmosis');
            if (selectTipo.value === 'canino') {
                divNivelEntrenamiento.style.display = 'block';
                divLibreToxoplasmosis.style.display = 'none';
            } else if (selectTipo.value === 'felino') {
                divNivelEntrenamiento.style.display = 'none';
                divLibreToxoplasmosis.style.display = 'block';
            }
        });
    </script>
</body>
</html>
